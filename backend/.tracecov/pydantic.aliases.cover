    1: """Support for alias configurations."""
       
    1: from __future__ import annotations
       
    1: import dataclasses
    1: from typing import Any, Callable, Literal
       
    1: from pydantic_core import PydanticUndefined
       
    1: from ._internal import _internal_dataclass
       
    1: __all__ = ('AliasGenerator', 'AliasPath', 'AliasChoices')
       
       
    3: @dataclasses.dataclass(**_internal_dataclass.slots_true)
    2: class AliasPath:
    1:     """!!! abstract "Usage Documentation"
               [`AliasPath` and `AliasChoices`](../concepts/alias.md#aliaspath-and-aliaschoices)
       
           A data class used by `validation_alias` as a convenience to create aliases.
       
           Attributes:
               path: A list of string or integer aliases.
           """
       
    1:     path: list[int | str]
       
    1:     def __init__(self, first_arg: str, *args: str | int) -> None:
>>>>>>         self.path = [first_arg] + list(args)
       
    1:     def convert_to_aliases(self) -> list[str | int]:
               """Converts arguments to a list of string or integer aliases.
       
               Returns:
                   The list of aliases.
               """
>>>>>>         return self.path
       
    1:     def search_dict_for_path(self, d: dict) -> Any:
               """Searches a dictionary for the path specified by the alias.
       
               Returns:
                   The value at the specified path, or `PydanticUndefined` if the path is not found.
               """
>>>>>>         v = d
>>>>>>         for k in self.path:
>>>>>>             if isinstance(v, str):
                       # disallow indexing into a str, like for AliasPath('x', 0) and x='abc'
>>>>>>                 return PydanticUndefined
>>>>>>             try:
>>>>>>                 v = v[k]
>>>>>>             except (KeyError, IndexError, TypeError):
>>>>>>                 return PydanticUndefined
>>>>>>         return v
       
       
    3: @dataclasses.dataclass(**_internal_dataclass.slots_true)
    2: class AliasChoices:
    1:     """!!! abstract "Usage Documentation"
               [`AliasPath` and `AliasChoices`](../concepts/alias.md#aliaspath-and-aliaschoices)
       
           A data class used by `validation_alias` as a convenience to create aliases.
       
           Attributes:
               choices: A list containing a string or `AliasPath`.
           """
       
    1:     choices: list[str | AliasPath]
       
    1:     def __init__(self, first_choice: str | AliasPath, *choices: str | AliasPath) -> None:
>>>>>>         self.choices = [first_choice] + list(choices)
       
    1:     def convert_to_aliases(self) -> list[list[str | int]]:
               """Converts arguments to a list of lists containing string or integer aliases.
       
               Returns:
                   The list of aliases.
               """
>>>>>>         aliases: list[list[str | int]] = []
>>>>>>         for c in self.choices:
>>>>>>             if isinstance(c, AliasPath):
>>>>>>                 aliases.append(c.convert_to_aliases())
                   else:
>>>>>>                 aliases.append([c])
>>>>>>         return aliases
       
       
    3: @dataclasses.dataclass(**_internal_dataclass.slots_true)
    2: class AliasGenerator:
    1:     """!!! abstract "Usage Documentation"
               [Using an `AliasGenerator`](../concepts/alias.md#using-an-aliasgenerator)
       
           A data class used by `alias_generator` as a convenience to create various aliases.
       
           Attributes:
               alias: A callable that takes a field name and returns an alias for it.
               validation_alias: A callable that takes a field name and returns a validation alias for it.
               serialization_alias: A callable that takes a field name and returns a serialization alias for it.
           """
       
    1:     alias: Callable[[str], str] | None = None
    1:     validation_alias: Callable[[str], str | AliasPath | AliasChoices] | None = None
    1:     serialization_alias: Callable[[str], str] | None = None
       
    5:     def _generate_alias(
               self,
    1:         alias_kind: Literal['alias', 'validation_alias', 'serialization_alias'],
    1:         allowed_types: tuple[type[str] | type[AliasPath] | type[AliasChoices], ...],
    1:         field_name: str,
    1:     ) -> str | AliasPath | AliasChoices | None:
               """Generate an alias of the specified kind. Returns None if the alias generator is None.
       
               Raises:
                   TypeError: If the alias generator produces an invalid type.
               """
>>>>>>         alias = None
>>>>>>         if alias_generator := getattr(self, alias_kind):
>>>>>>             alias = alias_generator(field_name)
>>>>>>             if alias and not isinstance(alias, allowed_types):
>>>>>>                 raise TypeError(
>>>>>>                     f'Invalid `{alias_kind}` type. `{alias_kind}` generator must produce one of `{allowed_types}`'
                       )
>>>>>>         return alias
       
    1:     def generate_aliases(self, field_name: str) -> tuple[str | None, str | AliasPath | AliasChoices | None, str | None]:
               """Generate `alias`, `validation_alias`, and `serialization_alias` for a field.
       
               Returns:
                   A tuple of three aliases - validation, alias, and serialization.
               """
>>>>>>         alias = self._generate_alias('alias', (str,), field_name)
>>>>>>         validation_alias = self._generate_alias('validation_alias', (str, AliasChoices, AliasPath), field_name)
>>>>>>         serialization_alias = self._generate_alias('serialization_alias', (str,), field_name)
       
>>>>>>         return alias, validation_alias, serialization_alias  # type: ignore
